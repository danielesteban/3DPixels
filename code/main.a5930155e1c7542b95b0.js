(this.webpackJsonp=this.webpackJsonp||[]).push([[1],{"0kCN":function(e,t,n){},"3wNx":function(e,t,n){"use strict";var r=n("RMY0");n.n(r).a},C417:function(e,t,n){},FXAq:function(e,t,n){},GUI7:function(e,t,i){"use strict";i.r(t);var n=i("Kw5r"),r=i("L2JU");var o={name:"Auth",data:function(){return{isSignup:!1}},computed:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},Object(r.b)("user",["hasAuthError","isShowingAuth"]),{hasSigninError:function(){return!this.isSignup&&"signin"===this.hasAuthError},hasSignupError:function(){return this.isSignup&&"signup"===this.hasAuthError}}),watch:{isShowingAuth:function(){this.isShowingAuth&&this.focus()}},methods:{hide:function(){this.$store.dispatch("user/hideAuth")},focus:function(){var e=this;this.$nextTick(function(){e.$refs[e.isSignup?"nameInput":"emailInput"].focus()})},submit:function(e){var t=e.target,n=this.isSignup,r=t.name&&t.name.value,i=t.email.value,o=t.password.value,a=t.confirmPassword&&t.confirmPassword.value;if(n){if(!r||!i||!o)return;if(o!==a)return;this.$store.dispatch("user/signup",{name:r,email:i,password:o})}else{if(!i||!o)return;this.$store.dispatch("user/signin",{email:i,password:o})}},swap:function(){this.isSignup=!this.isSignup,this.focus()}}},a=(i("zid9"),i("KHd+")),s=Object(a.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isShowingAuth?n("div",{staticClass:"auth",on:{click:t.hide}},[n("form",{on:{click:function(e){e.stopPropagation()},submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.isSignup?n("div",{staticClass:"field"},[t._m(0),t._v(" "),n("input",{ref:"nameInput",attrs:{name:"name",maxlength:"25",type:"text",required:""}})]):t._e(),t._v(" "),n("div",{staticClass:"field"},[n("label",[t._v("\n        Email\n        "),t.isSignup?n("span",[t._v("\n          (Private)\n        ")]):t._e()]),t._v(" "),n("input",{ref:"emailInput",attrs:{name:"email",type:"email",autofocus:"",required:""}})]),t._v(" "),t._m(1),t._v(" "),t.isSignup?n("div",{staticClass:"field"},[n("label",[t._v("Confirm Password")]),t._v(" "),n("input",{attrs:{name:"confirmPassword",type:"password",required:""}})]):t._e(),t._v(" "),t.hasSigninError?n("div",{staticClass:"error"},[t._v("\n      Invalid email/password combination\n    ")]):t._e(),t._v(" "),t.hasSignupError?n("div",{staticClass:"error"},[t._v("\n      Email already exists\n    ")]):t._e(),t._v(" "),n("div",{staticClass:"submit"},[n("button",{attrs:{type:"submit"}},[t.isSignup?n("span",[t._v("Sign-Up")]):n("span",[t._v("Sign-In")])])]),t._v(" "),n("div",{staticClass:"alternative"},[n("a",{on:{click:t.swap}},[t.isSignup?n("span",[t._v("I already have an account")]):n("span",[t._v("Create an account")])])])])]):t._e()},[function(){var e=this.$createElement,t=this._self._c||e;return t("label",[this._v("\n        Display Name\n        "),t("span",[this._v("\n          (Public)\n        ")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"field"},[t("label",[this._v("Password")]),this._v(" "),t("input",{attrs:{name:"password",type:"password",required:""}})])}],!1,null,"50beed16",null);s.options.__file="auth.vue";var u=s.exports,c={name:"Footer",computed:{title:function(){return"3DPixels"},year:function(){return(new Date).getFullYear()}}},l=(i("sjho"),Object(a.a)(c,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footer"},[e._v("\n  "+e._s(e.title)+" ·\n  This site is \n  "),n("a",{attrs:{href:"https://github.com/danielesteban/3DPixels#readme",rel:"noopener noreferrer",target:"_blank"}},[e._v("\n    free software\n  ")]),e._v("\n   · \n  "),n("a",{attrs:{href:"https://dani.gatunes.com",rel:"noopener noreferrer",target:"_blank"}},[e._v("\n    dani@gatunes\n  ")]),e._v("\n   © "+e._s(e.year)+"\n")])},[],!1,null,"361cf3ea",null));l.options.__file="footer.vue";var f=l.exports;var h={name:"Header",computed:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},Object(r.b)("user",["isAuth","profile"]),{isCreating:function(){return"editor"===this.$route.name&&!this.$route.params.id},title:function(){return"3DPixels"}}),methods:{signIn:function(){this.$store.dispatch("user/showAuth")},signOut:function(){this.$store.dispatch("user/signout")}}},m=(i("3wNx"),Object(a.a)(h,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",[n("div",{staticClass:"nav"},[n("router-link",{attrs:{to:{name:"home"}}},[e._v("\n        "+e._s(e.title)+"\n      ")])],1),e._v(" "),n("div",{staticClass:"actions"},[e.isCreating?e._e():n("router-link",{attrs:{to:{name:"editor"}}},[e._v("\n        Create\n      ")]),e._v(" "),e.isAuth?n("div",{staticClass:"dropdown"},[n("div",{staticClass:"toggle"},[e._v("\n          "+e._s(e.profile.name)+"\n          "),n("i",[e._v(">")])]),e._v(" "),n("div",{staticClass:"content"},[n("router-link",{attrs:{to:{name:"profile",params:{id:e.profile._id}}}},[e._v("\n            Your profile\n          ")]),e._v(" "),n("a",{on:{click:e.signOut}},[e._v("Sign-Out")])],1)]):n("button",{on:{click:e.signIn}},[e._v("\n        Sign-In\n      ")])],1)])])},[],!1,null,"cf5af17c",null));m.options.__file="header.vue";var p={name:"Layout",components:{Auth:u,Footer:f,Header:m.exports}},d=(i("lMWF"),i("orqt"),Object(a.a)(p,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Header"),e._v(" "),n("div",{staticClass:"route"},[n("router-view")],1),e._v(" "),n("Footer"),e._v(" "),n("Auth")],1)},[],!1,null,"94760a62",null));d.options.__file="layout.vue";var v=d.exports,g=i("jE9Z"),b=i("Womt"),y=i("Vb2j"),_=i.n(y),w=i("1339"),j=i.n(w),E=i("vDqi"),x=i.n(E),S=i("je13"),T=i.n(S),O=x.a.create({baseURL:"https://api.3dpixels.gatunes.com/"}),k="3DPixels::JWT",P={auth:{getStoredToken:function(){return T.a.get(k)},refreshToken:function(){return O.get("user")},setToken:function(e){var t=O.defaults.headers.common;e?(t.Authorization="Bearer ".concat(e),T.a.set(k,e)):(delete t.Authorization,T.a.remove(k))}},meshes:{list:function(e){return O.get("meshes/latest/".concat(e))},meta:function(e){return O.get("meshes/".concat(e))},save:function(e){var t=e._id,n=e.bg,r=e.fps,i=e.texture,o=e.title,a=new FormData;return a.append("bg",n),a.append("fps",r),a.append("texture",new Blob([i],{type:"image/png"})),a.append("title",o),O.put("meshes/".concat(t||""),a)},texture:function(e){return O.get("meshes/".concat(e,"/texture"),{responseType:"arraybuffer"})}},user:{get:function(e){return O.get("user/".concat(e))},meshes:function(e,t){return O.get("user/".concat(e,"/meshes/").concat(t))},signin:function(e,t){return O.post("user",{email:e,password:t})},signup:function(e,t,n){return O.put("user",{name:e,email:t,password:n})}}};function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var D=function(){function n(){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.queue=[],this.workers=[],Promise.all([i.e(0),i.e(2)]).then(i.t.bind(null,"lmWw",7)).then(function(e){var t=e.default;r.workers=C(Array(n.numWorkers)).map(function(){var n=new t;return n.onmessage=function(e){var t=e.data;return r.onMessage(n,t)},n});var o=r.queue;r.workers.forEach(function(e){if(o.length){var t=o.shift(),n=t.buffer,r=t.disposable,i=t.resolve;e.isBusy=!0,e.resolve=i,e.postMessage({buffer:n},r?[n]:[])}})})}var e,t,r;return e=n,(t=[{key:"mesh",value:function(e){var o=this.queue,a=this.workers,n=function(r,i){return new Promise(function(e){for(var t,n=0;n<a.length;n+=1)if(!a[n].isBusy){t=a[n];break}t?(t.isBusy=!0,t.resolve=e,t.postMessage({buffer:r},i?[r]:[])):o.push({buffer:r,disposable:i,resolve:e})})};return e instanceof ArrayBuffer?n(e,!1):P.meshes.texture(e).then(function(e){var t=e.data;return n(t,!0)})}},{key:"onMessage",value:function(e,t){e.resolve(t);var n=this.queue;if(n.length){var r=n.shift(),i=r.buffer,o=r.disposable,a=r.resolve;e.resolve=a,e.postMessage({buffer:i},o?[i]:[])}else delete e.resolve,e.isBusy=!1}}])&&A(e.prototype,t),r&&A(e,r),n}();D.numWorkers=navigator.hardwareConcurrency||4;var R=new D;function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function o(e){var t,n=e._id,r=e.fps,i=e.texture;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=M(this,$(o).call(this,new b.b,new b.g({vertexColors:b.q})))).fps=r,t.frame=0,t.lastTick=0,t.visible=!1,t.load(i||n),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(o,b["f"]),t=o,(n=[{key:"load",value:function(e){var s=this;R.mesh(e).then(function(e){var t=e.position,n=e.color,r=e.index,i=e.frames;s.frames=i,s.frame=Math.min(s.frame,i.length-1);var o=i[s.frame];s.geometry&&s.geometry.dispose();var a=new b.b;a.setDrawRange(o.start,o.count),a.setIndex(new b.a(r,1)),a.addAttribute("position",new b.a(t,3)),a.addAttribute("color",new b.a(n,3)),s.geometry=a,s.visible=!0})}},{key:"onBeforeRender",value:function(e){var t=e.animationTime,n=this.fps,r=this.frames,i=this.lastTick;if(1<r.length&&r&&1/n<=t-i){this.lastTick=t,this.frame=(this.frame+1)%r.length;var o=r[this.frame];this.geometry.setDrawRange(o.start,o.count)}}}])&&F(t.prototype,n),r&&F(t,r),o}();function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function i(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=new b.j(1,1);t.rotateX(-.5*Math.PI),t.translate(0,-.001,0);var n=b.m.basic.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","varying vec3 vWorldPosition;"].join("\n")).replace("#include <fog_vertex>",["#include <fog_vertex>","vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;"].join("\n")),r=b.m.basic.fragmentShader.replace("#include <clipping_planes_pars_fragment>",["#include <clipping_planes_pars_fragment>","varying vec3 vWorldPosition;"].join("\n")).replace("vec4 diffuseColor = vec4( diffuse, opacity );",["vec2 coord = vWorldPosition.xz * 0.25;","vec2 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);","float line = min(grid.x, grid.y);","vec4 diffuseColor = vec4(mix(diffuse, diffuse * 1.25, 1.0 - min(line, 1.0)), opacity);"].join("\n"));return(e=B(this,H(i).call(this,t,new b.n({name:"ground-material",uniforms:b.o.clone(b.m.basic.uniforms),fragmentShader:r,vertexShader:n,extensions:{derivatives:!0},fog:!0})))).material.color=e.material.uniforms.diffuse.value,e.scale.set(512,1,512),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,b["f"]),i}();function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}b.l.fog_pars_vertex=b.l.fog_pars_vertex.replace("varying float fogDepth;","varying vec4 fogDepth;"),b.l.fog_vertex=b.l.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = mvPosition;"),b.l.fog_pars_fragment=b.l.fog_pars_fragment.replace("varying float fogDepth;","varying vec4 fogDepth;"),b.l.fog_fragment=b.l.fog_fragment.replace("float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );",["float fogDist = length(fogDepth);","float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDist * fogDist * LOG2 ) );"].join("\n")).replace("float fogFactor = smoothstep( fogNear, fogFar, fogDepth );","float fogFactor = smoothstep( fogNear, fogFar, length(fogDepth) );");var W={name:"Renderer",props:{mesh:{type:Object,required:!0},pointerAnimation:{type:Boolean,default:function(){return!1}}},watch:{"mesh.bg":function(){var e=this.mesh.bg;this.setClearColor(e)},"mesh.fps":function(){var e=this.mesh.fps;this.state.actor.fps=e},"mesh.texture":function(){var e=this.mesh.texture;this.state.actor.load(e)}},mounted:function(){this.init()},beforeDestroy:function(){this.destroy()},methods:{init:function(){var e=this.mesh,t=this.$refs.mount,n={};(this.state=n).mount=t,n.camera=new b.i(64,1,1,1024),n.clock=new b.c,n.renderer=new b.r({alpha:!1,antialias:!0}),n.renderer.setPixelRatio(window.devicePixelRatio||1),n.scene=new b.k,n.scene.fog=new b.e(0,.007488),n.tilt=new b.h,n.tilt.add(n.camera),n.camera.position.z=64,n.tilt.position.y=32,n.pan=new b.h,n.pan.add(n.tilt),n.scene.add(n.pan),n.actor=new U(e),n.scene.add(n.actor),n.ground=new q,n.scene.add(n.ground),this.setClearColor(e.bg),t.appendChild(n.renderer.domElement),t.addEventListener("contextmenu",function(e){return e.preventDefault()},!1),t.addEventListener("dblclick",this.requestFullscreen,!1),t.addEventListener("mouseenter",this.onPointerEnter,!1),t.addEventListener("mouseleave",this.onPointerLeave,!1),window.addEventListener("blur",this.onPointerUp,!1),window.addEventListener("resize",this.onResize,!1),n.fullscreen=_()(t),this.$parent.$on("fullscreen",this.requestFullscreen),n.renderer.setAnimationLoop(this.onAnimate),this.onResize(),n.pointer={active:!1,animation:this.pointerAnimation,over:!1,current:new b.p(0,0),movement:new b.p(0,0),normalized:new b.p(0,0),last:new b.p(0,0)},n.touches=j()(window,{filtered:!0,target:t}).on("start",this.onPointerDown).on("move",this.onPointerMove).on("end",this.onPointerUp)},destroy:function(){var e=this.state,t=e.actor,n=e.fullscreen,r=e.ground,i=e.mount,o=e.renderer,a=e.touches;r.geometry.dispose(),t.geometry.dispose(),o.setAnimationLoop(null),o.dispose(),o.forceContextLoss(),this.$parent.$off("fullscreen",this.requestFullscreen),n.target()===i&&n.release(),n.dispose(),a.disable(),window.removeEventListener("blur",this.onPointerUp),window.removeEventListener("resize",this.onResize)},onAnimate:function(){var e=this.state,t=e.clock,n=e.camera,r=e.fullscreen,i=e.mount,o=e.pointer,a=e.renderer,s=e.scene,u=e.tilt,c=e.pan;a.animationDelta=t.getDelta(),a.animationTime=t.oldTime/1e3;var l=.3*Math.PI;if(o.active){var f=.2*a.animationDelta;c.rotation.y-=o.movement.x*f,c.rotation.y=Math.min(Math.max(c.rotation.y,-l),l),u.rotation.x-=o.movement.y*f*.5,u.rotation.x=Math.min(Math.max(u.rotation.x,-l),.5*l),o.movement.x=0,o.movement.y=0}else if(o.animation&&r.target()!==i){var h=.5*a.animationDelta,m=function(e){return Math.min(Math.max(e,-h),h)};o.over?(c.rotation.y+=m(o.normalized.x*l-c.rotation.y),u.rotation.x+=m(o.normalized.y*l*.5-u.rotation.x)):(c.rotation.y+=m(-c.rotation.y),u.rotation.x+=m(-u.rotation.x))}a.render(s,n)},onPointerDown:function(e){var t=this.state,n=t.pointer,r=t.mount;e.target!==r&&e.target.parentNode!==r||(n.active=!0)},onPointerMove:function(e,t){var n=V(t,2),r=n[0],i=n[1],o=this.state,a=o.pointer,s=o.renderer.getSize(),u=s.width,c=s.height;a.current.x=r,a.current.y=i,a.normalized.x=Math.min(Math.max(.5-r/u,-.5),.5),a.normalized.y=Math.min(Math.max(.5-i/c,-.5),.5),a.movement.subVectors(a.current,a.last),a.last.copy(a.current)},onPointerUp:function(){this.state.pointer.active=!1},onPointerEnter:function(){this.state.pointer.over=!0},onPointerLeave:function(){this.state.pointer.over=!1},onResize:function(){var e=this.state,t=e.camera,n=e.fullscreen,r=e.mount,i=e.renderer,o=r.getBoundingClientRect(),a=o.width,s=o.height;n.target()===r?(i.setSize(a,s),t.aspect=a/s):(i.setSize(a,a),t.aspect=1),t.updateProjectionMatrix()},requestFullscreen:function(){var e=this.state,t=e.fullscreen,n=e.mount;t.target()===n?t.release():t.request()},setClearColor:function(e){var t=this.state,n=t.ground,r=t.renderer,i=t.scene.fog;i.color.setHex(e),n.material.color.copy(i.color).multiplyScalar(.25),r.setClearColor(i.color)}}},X=Object(a.a)(W,function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"mount"})},[],!1,null,null,null);X.options.__file="renderer.vue";var Y=X.exports,Q=new b.d,G={name:"Home",components:{Renderer:Y},filters:{hexColor:function(e){return Q.set(e),"#".concat(Q.getHexString())}},props:{meshes:{type:Array,required:!0}}},K=(i("kbrO"),Object(a.a)(G,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"listing"},t._l(t.meshes,function(e){return n("div",{key:e._id,staticClass:"mesh"},[n("Renderer",{attrs:{mesh:e,"pointer-animation":!0}}),t._v(" "),n("router-link",{staticClass:"meta",style:{backgroundColor:t.$options.filters.hexColor(e.bg)},attrs:{to:{name:"editor",params:{id:e._id}}}},[n("span",{staticClass:"title"},[t._v("\n        "+t._s(e.title)+"\n      ")]),t._v(" "),n("span",{staticClass:"creator"},[t._v("\n        by "+t._s(e.creator.name)+"\n      ")])])],1)}))},[],!1,null,"6c5514f3",null));K.options.__file="listing.vue";var Z=K.exports;var J={name:"Pagination",components:{Renderer:Y},props:{page:{type:Number,default:function(){return 0}},pages:{type:Number,required:!0},params:{type:Object,default:function(){return{}}},route:{type:String,required:!0}},methods:{getRoute:function(e){return{name:this.route,params:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},this.params,{page:e})}}}},ee=(i("r26W"),Object(a.a)(J,function(){var e=this,t=e.$createElement,n=e._self._c||t;return 1<e.pages?n("div",{staticClass:"pagination"},[0<e.page?n("router-link",{attrs:{to:e.getRoute(e.page-1)}},[e._v("\n    <\n  ")]):n("a",{staticClass:"disabled"},[e._v("\n    <\n  ")]),e._v(" "),n("span",[e._v("\n    "+e._s(e.page+1)+"/"+e._s(e.pages)+"\n  ")]),e._v(" "),e.page<e.pages-1?n("router-link",{attrs:{to:e.getRoute(e.page+1)}},[e._v("\n    >\n  ")]):n("a",{staticClass:"disabled"},[e._v("\n    >\n  ")])],1):e._e()},[],!1,null,"47c381d4",null));ee.options.__file="pagination.vue";var te=ee.exports;var ne={name:"Home",components:{Listing:Z,Pagination:te},computed:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},Object(r.b)("home",["meshes","pages"]),{page:function(){var e=this.$route.params.page;return parseInt(e||0,10)}}),mounted:function(){this.fetch(this.page)},beforeDestroy:function(){this.reset()},beforeRouteUpdate:function(e,t,n){var r=e.params.page;this.reset(),this.fetch(parseInt(r||0,10)),n()},methods:{fetch:function(e){this.$store.dispatch("home/fetch",e)},reset:function(){this.$store.dispatch("home/reset")}}},re=(i("lQwf"),Object(a.a)(ne,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Listing",{attrs:{meshes:e.meshes}}),e._v(" "),n("Pagination",{attrs:{page:e.page,pages:e.pages,route:"home"}})],1)},[],!1,null,"51c35569",null));re.options.__file="home.vue";var ie=re.exports,oe=i("wd/R"),ae=i.n(oe);function se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ue=new b.d,ce={name:"Frames",props:{background:{type:Number,required:!0},current:{type:Number,required:!0},texture:{type:ArrayBuffer,required:!0}},data:function(){return{frames:[]}},computed:{backgroundStyle:function(){return ue.set(this.background),ue.offsetHSL(0,0,-.1),{backgroundColor:"#".concat(ue.getHexString())}}},watch:{texture:function(){this.load()}},mounted:function(){this.load()},methods:{load:function(){var e=this,n=new Image,r=document.createElement("canvas"),i=r.getContext("2d");n.onload=function(){e.frames=se(Array(Math.floor(n.width/64))).map(function(e,t){return r.width=64,r.height=64,i.drawImage(n,64*t,0,64,64,0,0,64,64),r.toDataURL("image/png")})};var t=new Blob([this.texture],{type:"image/png"});n.src=URL.createObjectURL(t)},setFrame:function(e){this.$store.dispatch("editor/setFrame",e)}}},le=(i("dHA3"),Object(a.a)(ce,function(){var n=this,e=n.$createElement,r=n._self._c||e;return r("div",{staticClass:"frames"},n._l(n.frames,function(e,t){return r("img",{key:t+":"+e,class:{active:n.current===t},style:n.backgroundStyle,attrs:{src:e},on:{click:function(e){n.setFrame(t)},mousedown:function(e){e.preventDefault()}}})}))},[],!1,null,"22b8d138",null));le.options.__file="frames.vue";var fe=le.exports;function he(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var me=new b.d,pe={name:"Sprite",props:{background:{type:Number,required:!0},brush:{type:Number,required:!0},color:{type:String,required:!0},frame:{type:Number,required:!0},texture:{type:ArrayBuffer,required:!0},tool:{type:String,required:!0}},computed:{brushGrid:function(){for(var e=this.brush,t=[],n=Math.max(e-1,0),r=-n;r<=n;r+=1)for(var i=-n;i<=n;i+=1)t.push([i,r]);return t}},watch:{background:function(){this.render()},frame:function(){this.render(),delete this.state.lastPixel},tool:function(){delete this.state.lastPixel}},mounted:function(){var e=this.$refs.canvas;e.addEventListener("contextmenu",function(e){return e.preventDefault()}),window.addEventListener("resize",this.onResize,!1),this.onResize(),this.load(),this.touches=j()(window,{filtered:!0,target:e}).on("start",this.onPointerDown).on("move",this.onPointerMove).on("end",this.onPointerUp),this.$parent.$on("addFrame",this.addFrame),this.$parent.$on("removeFrame",this.removeFrame)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize),this.touches.disable(),this.$parent.$off("addFrame",this.addFrame),this.$parent.$off("removeFrame",this.removeFrame)},methods:{addFrame:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this.frame,r=this.state,i=r.width,o=r.height;r.width=i+64,r.ctx.putImageData(r.pixels,0,0,0,0,64*(n+1),o),r.ctx.putImageData(r.pixels,64,0,64*(n+(t?0:1)),0,i-64*(n+(t?0:1)),o),r.pixels=r.ctx.getImageData(0,0,r.width,r.height),this.updateTexture().then(function(){return e.$emit("frames",{current:n+1,total:Math.floor(r.width/64)})})},removeFrame:function(){var e=this,t=this.frame,n=this.state,r=n.width,i=n.height;n.width=r-64,n.ctx.putImageData(n.pixels,0,0,0,0,64*t,i),n.ctx.putImageData(n.pixels,-64,0,64*(t+1),0,r-64*(t+1),i),n.pixels=n.ctx.getImageData(0,0,n.width,n.height),this.updateTexture().then(function(){return e.$emit("frames",{current:Math.max(t-1,0),total:Math.floor(n.width/64)})})},load:function(){var t=this,n=new Image;n.onload=function(){var e=document.createElement("canvas");e.width=n.width,e.height=n.height,e.ctx=e.getContext("2d"),e.ctx.drawImage(n,0,0),e.pixels=e.ctx.getImageData(0,0,e.width,e.height),e.lastUpdate=Date.now(),t.state=e,t.$emit("frames",{current:0,total:Math.floor(e.width/64)}),t.render()};var e=new Blob([this.texture],{type:"image/png"});n.src=URL.createObjectURL(e)},onPointerDown:function(e,t){var n=this.$refs.canvas;e.target!==n&&e.target.parentNode!==n||(this.drawing=!0,this.onPointerMove(e,t))},onPointerMove:function(e,t){var n=he(t,2),u=n[0],c=n[1],r=this.$refs.canvas,i=this.brushGrid,l=this.color,o=this.frame,a=this.state,f=this.tool;if(!(!this.drawing||u<0||c<0||u>=r.width||c>=r.height)){u=Math.floor(64*u/r.width),c=Math.floor(64*c/r.width);var h=function(e,t){return 4*(t*a.width+64*o+e)},s=h(u,c);if(a.lastPixel!==s){a.lastPixel=s;var m=a.pixels.data;if("pick"!==f){i.forEach(function(e){var t=he(e,2),n=t[0],r=t[1],i=u+n,o=c+r;if(!(i<0||o<0||64<=i||64<=o)){var a=h(i,o);if("erase"===f)m[a]=0,m[a+1]=0,m[a+2]=0,m[a+3]=0;else{me.set(l);var s=.05*((me.r+me.g+me.b)/3);me.r+=(2*Math.random()-1)*s,me.g+=(2*Math.random()-1)*s,me.b+=(2*Math.random()-1)*s,m[a]=255*me.r,m[a+1]=255*me.g,m[a+2]=255*me.b,m[a+3]=255}}}),a.ctx.putImageData(a.pixels,0,0),this.render();var p=Date.now()-a.lastUpdate;100<=p?this.updateTexture():(clearTimeout(a.updateTimer),a.updateTimer=setTimeout(this.updateTexture,100-p))}else if(128<=m[s+3]){var d=m[s],v=m[s+1],g=m[s+2];me.r=d/255,me.g=v/255,me.b=g/255,this.$emit("color","#".concat(me.getHexString()))}}}},onPointerUp:function(){this.drawing=!1},onResize:function(){var e=this.$refs.canvas,t=e.parentNode.getBoundingClientRect().width;e.width=t,e.height=t,this.render()},render:function(){if(this.state){var e=this.background,t=this.$refs.canvas,n=this.frame,r=this.state;t.width=t.width;var i=t.getContext("2d");i.imageSmoothingEnabled=!1,me.set(e),me.offsetHSL(0,0,-.1),i.fillStyle="#".concat(me.getHexString()),i.fillRect(0,0,t.width,t.height);var o=t.width/64;i.scale(o,o),i.drawImage(r,64*n,0,64,64,0,0,64,64),i.beginPath();for(var a=0;a<=64;a+=1)i.moveTo(a,0),i.lineTo(a,64);for(var s=0;s<=64;s+=1)i.moveTo(0,s),i.lineTo(64,s);i.lineWidth=.1,i.strokeStyle="rgba(0, 0, 0, .1)",i.stroke()}},updateTexture:function(){var t=this,e=this.state;return clearTimeout(e.updateTimer),e.lastUpdate=Date.now(),new Promise(function(n){return e.toBlob(function(e){var t=new FileReader;t.addEventListener("loadend",function(){n(t.result)}),t.readAsArrayBuffer(e)},"image/png")}).then(function(e){return t.$emit("texture",e)})}}},de=Object(a.a)(pe,function(){var e=this.$createElement;return(this._self._c||e)("canvas",{ref:"canvas"})},[],!1,null,null,null);de.options.__file="sprite.vue";var ve=de.exports;var ge=new b.d,be={name:"Editor",components:{Frames:fe,Sprite:ve,Renderer:Y},filters:{fromNow:function(e){return ae()(e).fromNow()},hexColor:function(e){return ge.set(e),"#".concat(ge.getHexString())},intColor:function(e){return ge.set(e),ge.getHex()}},computed:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},Object(r.b)("editor",["brush","color","frame","frames","hasChanged","isEditingTitle","mesh","tool"]),Object(r.b)("user",["isAuth","profile"]),{isCreator:function(){return!this.mesh._id||this.isAuth&&this.mesh.creator&&this.mesh.creator._id===this.profile._id}}),mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1);var e=this.$route.params.id;e?this.fetch(e):this.create()},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown),this.reset()},beforeRouteUpdate:function(e,t,n){var r=e.params.id;this.reset(),r?this.fetch(r):this.create(),n()},methods:{create:function(){this.$store.dispatch("editor/create")},fetch:function(e){this.$store.dispatch("editor/fetch",e)},fullscreen:function(){this.$emit("fullscreen")},editTitle:function(){var t=this;this.isCreator&&(this.$store.dispatch("editor/editTitle"),this.$nextTick(function(){var e=t.$refs.titleInput;e.select(),e.focus()}))},onColor:function(e){this.$store.dispatch("editor/setColor",e),this.setTool("paint")},onFrames:function(e){this.$store.dispatch("editor/setFrames",e)},onKeyDown:function(e){var t=e.keyCode,n=e.repeat,r=e.target;if(!n&&"INPUT"!==r.tagName){var i=this.frame,o=this.frames;switch(t){case 37:case 38:0<i&&this.stepFrame(-1);break;case 39:case 40:i<o-1&&this.stepFrame(1);break;case 49:this.setTool("paint");break;case 50:this.setTool("erase");break;case 51:this.setTool("pick")}}},onTexture:function(e){this.$store.dispatch("editor/setTexture",e)},onTitleInputKeydown:function(e){var t=e.keyCode,n=e.repeat,r=e.target;13!==t||n||this.setTitle({target:r})},reset:function(){this.$store.dispatch("editor/reset")},save:function(){this.$store.dispatch(this.isAuth?"editor/save":"user/showAuth")},addFrame:function(e){this.$emit("addFrame",e)},removeFrame:function(){this.$emit("removeFrame")},stepFrame:function(e){this.$store.dispatch("editor/stepFrame",e)},setBackground:function(e){var t=e.target.value;this.$store.dispatch("editor/setBackground",this.$options.filters.intColor(t))},setBrush:function(e){var t=e.target.value;this.$store.dispatch("editor/setBrush",Math.min(Math.max(parseInt(t,10),1),10))},setColor:function(e){var t=e.target.value;this.onColor(t)},setFps:function(e){var t=e.target.value;this.$store.dispatch("editor/setFPS",Math.max(parseInt(t,10),1))},setTitle:function(e){var t=e.target.value;this.$store.dispatch("editor/setTitle",t)},setTool:function(e){this.$store.dispatch("editor/setTool",e)}}},ye=(i("IjXu"),Object(a.a)(be,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.mesh.texture?n("div",{staticClass:"editor"},[n("div",{staticClass:"title"},[t.isEditingTitle?n("input",{ref:"titleInput",attrs:{maxlength:"25",type:"text"},domProps:{value:t.mesh.title},on:{keydown:t.onTitleInputKeydown,blur:t.setTitle}}):n("span",{on:{click:function(e){t.editTitle()}}},[t._v("\n      "+t._s(t.mesh.title)+"\n    ")]),t._v(" "),t.mesh.creator?n("small",[t._v("\n      by\n      "),n("router-link",{attrs:{to:{name:"profile",params:{id:t.mesh.creator._id}}}},[t._v("\n        "+t._s(t.mesh.creator.name)+"\n      ")])],1):t._e()]),t._v(" "),n("div",{staticClass:"meta"},[t._v("\n    created "+t._s(t._f("fromNow")(t.mesh.createdAt))+"\n  ")]),t._v(" "),n("div",{staticClass:"toolbar"},[n("div",[n("button",{class:{active:"paint"===t.tool},on:{click:function(e){t.setTool("paint")}}},[t._v("\n        Paint\n      ")]),t._v(" "),n("button",{class:{active:"erase"===t.tool},on:{click:function(e){t.setTool("erase")}}},[t._v("\n        Erase\n      ")]),t._v(" "),n("button",{class:{active:"pick"===t.tool},on:{click:function(e){t.setTool("pick")}}},[t._v("\n        Pick\n      ")])]),t._v(" "),n("div",[n("label",[t._v("FPS:")]),t._v(" "),n("input",{attrs:{type:"number",min:"1"},domProps:{value:t.mesh.fps},on:{change:t.setFps}})]),t._v(" "),n("div",[n("button",{class:{warning:t.hasChanged},attrs:{disabled:t.mesh._id&&t.isCreator&&!t.hasChanged},on:{click:function(e){t.save()}}},[t.isCreator?n("span",[t._v("\n          Save\n        ")]):n("span",[t._v("\n          Save as copy\n        ")])])])]),t._v(" "),n("div",{staticClass:"wrapper"},[n("div",[n("Sprite",{attrs:{background:t.mesh.bg,brush:t.brush,color:t.color,frame:t.frame,texture:t.mesh.texture,tool:t.tool},on:{color:t.onColor,frames:t.onFrames,texture:t.onTexture}})],1),t._v(" "),n("div",{staticClass:"frames"},[n("Frames",{attrs:{background:t.mesh.bg,current:t.frame,texture:t.mesh.texture}})],1),t._v(" "),n("Renderer",{attrs:{mesh:t.mesh}})],1),t._v(" "),n("div",{staticClass:"toolbar"},[n("div",[n("input",{attrs:{type:"color"},domProps:{value:t.color},on:{change:t.setColor}}),t._v(" "),n("input",{attrs:{type:"color"},domProps:{value:t._f("hexColor")(t.mesh.bg)},on:{change:t.setBackground}}),t._v(" "),n("label",[t._v("Brush:")]),t._v(" "),n("input",{attrs:{type:"number",min:"1",max:"10"},domProps:{value:t.brush},on:{change:t.setBrush}})]),t._v(" "),n("div",[n("button",{on:{click:function(e){t.addFrame()}}},[t._v("\n        +\n      ")]),t._v(" "),n("button",{on:{click:function(e){t.addFrame(!0)}}},[t._v("\n        Clone\n      ")]),t._v(" "),n("button",{attrs:{disabled:t.frames<=1},on:{click:function(e){t.removeFrame()}}},[t._v("\n        ×\n      ")])]),t._v(" "),n("div",[n("button",{on:{click:t.fullscreen}},[t._v("\n        Fullscreen\n      ")])])])]):t._e()},[],!1,null,"4efd1397",null));ye.options.__file="editor.vue";var _e=ye.exports;var we={name:"Home",components:{Listing:Z,Pagination:te},filters:{fromNow:function(e){return ae()(e).fromNow()}},computed:function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},Object(r.b)("profile",["meshes","meta","pages"]),{page:function(){var e=this.$route.params.page;return parseInt(e||0,10)}}),mounted:function(){var e=this.$route.params.id;this.fetch(e,this.page)},beforeDestroy:function(){this.reset()},beforeRouteUpdate:function(e,t,n){var r=e.params,i=r.id,o=r.page;this.reset(),this.fetch(i,parseInt(o||0,10)),n()},methods:{fetch:function(e,t){this.$store.dispatch("profile/fetch",{id:e,page:t})},reset:function(){this.$store.dispatch("profile/reset")}}},je=(i("rRTj"),Object(a.a)(we,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile"},[e.meta.name?n("div",{staticClass:"meta"},[n("h1",[e._v(e._s(e.meta.name))]),e._v(" "),n("p",[e._v("joined "+e._s(e._f("fromNow")(e.meta.createdAt)))])]):e._e(),e._v(" "),n("Listing",{attrs:{meshes:e.meshes}}),e._v(" "),n("Pagination",{attrs:{page:e.page,pages:e.pages,params:{id:e.meta._id},route:"profile"}})],1)},[],!1,null,"2d14956b",null));je.options.__file="profile.vue";var Ee=je.exports;n.a.use(g.a);var xe=new g.a({base:"/",routes:[{component:ie,name:"home",path:"/latest/:page?"},{component:_e,name:"editor",path:"/editor/:id?"},{component:Ee,name:"profile",path:"/user/:id/:page?"},{path:"*",redirect:{name:"home"}}]});function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Te={namespaced:!0,state:{brush:1,color:"#aaaaaa",frame:0,frames:0,hasChanged:!1,isEditingTitle:!1,mesh:!1,tool:"paint"},mutations:{EDIT_TITLE:function(e){e.isEditingTitle=!0},RESET:function(e){e.frame=0,e.frames=0,e.mesh=!1,e.hasChanged=!1,e.isEditingTitle=!1},SAVED:function(e){e.hasChanged=!1},SET_BACKGROUND:function(e,t){e.mesh.bg=t,e.hasChanged=!0},SET_BRUSH:function(e,t){e.brush=t},SET_COLOR:function(e,t){e.color=t},SET_FPS:function(e,t){e.mesh.fps=t,e.hasChanged=!0},SET_FRAME:function(e,t){e.frame=Math.min(Math.max(t,0),e.frames-1)},STEP_FRAME:function(e,t){e.frame=Math.min(Math.max(e.frame+t,0),e.frames-1)},SET_FRAMES:function(e,t){var n=t.current,r=t.total;e.frame=n,e.frames=r},SET_MESH:function(e,t){e.mesh=t},SET_TEXTURE:function(e,t){e.mesh.texture=t,e.hasChanged=!0},SET_TITLE:function(e,t){t&&e.mesh.title!==t&&(e.mesh.title=t,e.hasChanged=!0),e.isEditingTitle=!1},SET_TOOL:function(e,t){e.tool=t}},actions:{create:function(e){var n=e.commit,r=e.rootState,t=document.createElement("canvas");t.width=64,t.height=64,t.toBlob(function(e){var t=new FileReader;t.addEventListener("loadend",function(){n("RESET"),n("SET_MESH",{_id:!1,creator:!!r.user.isAuth&&r.user.profile,bg:5592405,fps:2,texture:t.result,title:"Untitled"})}),t.readAsArrayBuffer(e)},"image/png")},editTitle:function(e){(0,e.commit)("EDIT_TITLE")},fetch:function(e,t){var i=e.commit;Promise.all([P.meshes.meta(t),P.meshes.texture(t)]).then(function(e){var t=Se(e,2),n=t[0].data,r=t[1].data;return i("SET_MESH",function(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{},t=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(o).filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable}))),t.forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r})}return i}({},n,{texture:r}))}).catch(function(){return xe.push({name:"home"})})},reset:function(e){(0,e.commit)("RESET")},save:function(e){var n=e.commit,t=e.state;P.meshes.save(t.mesh).then(function(e){var t=e.data;t?xe.replace({name:"editor",params:{id:t}}):n("SAVED")}).catch(console.error)},setBackground:function(e,t){(0,e.commit)("SET_BACKGROUND",t)},setBrush:function(e,t){(0,e.commit)("SET_BRUSH",t)},setColor:function(e,t){(0,e.commit)("SET_COLOR",t)},setFPS:function(e,t){(0,e.commit)("SET_FPS",t)},setFrame:function(e,t){(0,e.commit)("SET_FRAME",t)},stepFrame:function(e,t){(0,e.commit)("STEP_FRAME",t)},setFrames:function(e,t){(0,e.commit)("SET_FRAMES",t)},setTexture:function(e,t){(0,e.commit)("SET_TEXTURE",t)},setTitle:function(e,t){(0,e.commit)("SET_TITLE",t)},setTool:function(e,t){(0,e.commit)("SET_TOOL",t)}}},Oe={namespaced:!0,state:{meshes:[],pages:0},mutations:{RESET:function(e){e.meshes=[],e.pages=0,e.meta={}},SET_MESHES:function(e,t){var n=t.meshes,r=t.pages;e.meshes=n,e.pages=r}},actions:{fetch:function(e,t){var n=e.commit;P.meshes.list(t).then(function(e){var t=e.data;return n("SET_MESHES",t)}).catch(function(){return n("RESET")})},reset:function(e){(0,e.commit)("RESET")}}},ke={namespaced:!0,state:{meshes:[],meta:{},pages:0},mutations:{RESET:function(e){e.meshes=[],e.pages=0,e.meta={}},SET_MESHES:function(e,t){var n=t.meshes,r=t.pages;e.meshes=n,e.pages=r},SET_META:function(e,t){e.meta=t}},actions:{fetch:function(e,t){var n=e.commit,r=t.id,i=t.page;Promise.all([P.user.meshes(r,i).then(function(e){var t=e.data;return n("SET_MESHES",t)}),P.user.get(r).then(function(e){var t=e.data;return n("SET_META",t)})]).catch(function(){return xe.push({name:"home"})})},reset:function(e){(0,e.commit)("RESET")}}},Pe=i("BOF4"),Ce=i.n(Pe),Ae={namespaced:!0,state:{hasAuthError:!1,isAuth:!1,isShowingAuth:!1,profile:{}},mutations:{SHOW_AUTH:function(e){e.isShowingAuth=!0},HIDE_AUTH:function(e){e.isShowingAuth=!1,e.hasAuthError=!1},SET_AUTH_ERROR:function(e,t){e.hasAuthError=t||!1},SIGN_IN:function(e,t){e.isAuth=!0,e.isShowingAuth=!1,e.profile=Ce()(t),P.auth.setToken(t)},SIGN_OUT:function(e){e.isAuth=!1,e.profile={},P.auth.setToken()}},actions:{initAuth:function(e){var t=e.commit,n=P.auth.getStoredToken();n&&(t("SIGN_IN",n),P.auth.refreshToken().then(function(e){var t=e.data;return P.auth.setToken(t)}).catch(function(){return t("SIGN_OUT")}))},showAuth:function(e){(0,e.commit)("SHOW_AUTH")},hideAuth:function(e){(0,e.commit)("HIDE_AUTH")},signin:function(e,t){var n=e.commit,r=t.email,i=t.password;n("SET_AUTH_ERROR"),P.user.signin(r,i).then(function(e){var t=e.data;return n("SIGN_IN",t)}).catch(function(){return n("SET_AUTH_ERROR","signin")})},signout:function(e){(0,e.commit)("SIGN_OUT")},signup:function(e,t){var n=e.commit,r=t.name,i=t.email,o=t.password;n("SET_AUTH_ERROR"),P.user.signup(r,i,o).then(function(e){var t=e.data;return n("SIGN_IN",t)}).catch(function(){return n("SET_AUTH_ERROR","signup")})}}};n.a.use(r.a);var De=new r.a.Store({modules:{editor:Te,home:Oe,profile:ke,user:Ae},strict:!1});De.dispatch("user/initAuth");var Re=De;n.a.config.performance=!1,n.a.config.productionTip=!1;new n.a({el:"#mount",components:{Layout:v},render:function(e){return e("Layout")},router:xe,store:Re})},IjXu:function(e,t,n){"use strict";var r=n("aZ1/");n.n(r).a},RMY0:function(e,t,n){},RnhZ:function(e,t,n){var r={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function i(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(t+1)return t;var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}i.keys=function(){return Object.keys(r)},i.resolve=o,(e.exports=i).id="RnhZ"},X4m3:function(e,t,n){},"aZ1/":function(e,t,n){},dHA3:function(e,t,n){"use strict";var r=n("uf7I");n.n(r).a},eZ3X:function(e,t,n){},g3qL:function(e,t,n){},gf4m:function(e,t,n){},kbrO:function(e,t,n){"use strict";var r=n("gf4m");n.n(r).a},lMWF:function(e,t,n){"use strict";var r=n("0kCN");n.n(r).a},lQwf:function(e,t,n){"use strict";var r=n("eZ3X");n.n(r).a},loVV:function(e,t,n){},orqt:function(e,t,n){"use strict";var r=n("X4m3");n.n(r).a},r26W:function(e,t,n){"use strict";var r=n("g3qL");n.n(r).a},rRTj:function(e,t,n){"use strict";var r=n("loVV");n.n(r).a},sjho:function(e,t,n){"use strict";var r=n("C417");n.n(r).a},uf7I:function(e,t,n){},zid9:function(e,t,n){"use strict";var r=n("FXAq");n.n(r).a}},[["GUI7",3,0]]]);
//# sourceMappingURL=main.3981780042e40c5e07338f8ddb2c9dd9.js.map