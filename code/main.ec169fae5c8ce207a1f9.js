(this.webpackJsonp=this.webpackJsonp||[]).push([[1],{"0kCN":function(t,e,n){},"1YDw":function(t,e,n){},"3wNx":function(t,e,n){"use strict";var r=n("RMY0");n.n(r).a},"6WBF":function(t,e,n){},C417:function(t,e,n){},CFU4:function(t,e,n){},FXAq:function(t,e,n){},GUI7:function(t,e,o){"use strict";o.r(e);var n=o("Kw5r"),r=o("L2JU");var i={name:"Auth",data:function(){return{isSignup:!1}},computed:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},Object(r.b)("user",["hasAuthError","isShowingAuth"]),{hasSigninError:function(){return!this.isSignup&&"signin"===this.hasAuthError},hasSignupError:function(){return this.isSignup&&"signup"===this.hasAuthError}}),watch:{isShowingAuth:function(){this.isShowingAuth&&this.focus()}},methods:{hide:function(){this.$store.dispatch("user/hideAuth")},focus:function(){var t=this;this.$nextTick(function(){t.$refs[t.isSignup?"nameInput":"emailInput"].focus()})},submit:function(t){var e=t.target,n=this.isSignup,r=e.name&&e.name.value,o=e.email.value,i=e.password.value,a=e.confirmPassword&&e.confirmPassword.value;if(n){if(!r||!o||!i)return;if(i!==a)return;this.$store.dispatch("user/signup",{name:r,email:o,password:i})}else{if(!o||!i)return;this.$store.dispatch("user/signin",{email:o,password:i})}},swap:function(){this.isSignup=!this.isSignup,this.focus()}}},a=(o("zid9"),o("KHd+")),s=Object(a.a)(i,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isShowingAuth?n("div",{staticClass:"auth",on:{click:e.hide}},[n("form",{on:{click:function(t){t.stopPropagation()},submit:function(t){return t.preventDefault(),e.submit(t)}}},[e.isSignup?n("div",{staticClass:"field"},[e._m(0),e._v(" "),n("input",{ref:"nameInput",attrs:{name:"name",maxlength:"25",type:"text",required:""}})]):e._e(),e._v(" "),n("div",{staticClass:"field"},[n("label",[e._v("\n        Email\n        "),e.isSignup?n("span",[e._v("\n          (Private)\n        ")]):e._e()]),e._v(" "),n("input",{ref:"emailInput",attrs:{name:"email",type:"email",autofocus:"",required:""}})]),e._v(" "),e._m(1),e._v(" "),e.isSignup?n("div",{staticClass:"field"},[n("label",[e._v("Confirm Password")]),e._v(" "),n("input",{attrs:{name:"confirmPassword",type:"password",required:""}})]):e._e(),e._v(" "),e.hasSigninError?n("div",{staticClass:"error"},[e._v("\n      Invalid email/password combination\n    ")]):e._e(),e._v(" "),e.hasSignupError?n("div",{staticClass:"error"},[e._v("\n      Email already exists\n    ")]):e._e(),e._v(" "),n("div",{staticClass:"submit"},[n("button",{attrs:{type:"submit"}},[e.isSignup?n("span",[e._v("Sign-Up")]):n("span",[e._v("Sign-In")])])]),e._v(" "),n("div",{staticClass:"alternative"},[n("a",{on:{click:e.swap}},[e.isSignup?n("span",[e._v("I already have an account")]):n("span",[e._v("Create an account")])])])])]):e._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("label",[this._v("\n        Display Name\n        "),e("span",[this._v("\n          (Public)\n        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"field"},[e("label",[this._v("Password")]),this._v(" "),e("input",{attrs:{name:"password",type:"password",required:""}})])}],!1,null,"50beed16",null);s.options.__file="auth.vue";var u=s.exports,c={name:"Footer",computed:{title:function(){return"3DPixels"},year:function(){return(new Date).getFullYear()}}},l=(o("sjho"),Object(a.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer"},[t._v("\n  "+t._s(t.title)+" ·\n  This site is \n  "),n("a",{attrs:{href:"https://github.com/danielesteban/3DPixels#readme",rel:"noopener noreferrer",target:"_blank"}},[t._v("\n    free software\n  ")]),t._v("\n   · \n  "),n("a",{attrs:{href:"https://dani.gatunes.com",rel:"noopener noreferrer",target:"_blank"}},[t._v("\n    dani@gatunes\n  ")]),t._v("\n   © "+t._s(t.year)+"\n")])},[],!1,null,"361cf3ea",null));l.options.__file="footer.vue";var f=l.exports;var h={name:"Header",computed:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},Object(r.b)("user",["isAuth","profile"]),{isCreating:function(){return"editor"===this.$route.name&&!this.$route.params.id},title:function(){return"3DPixels"}}),methods:{signIn:function(){this.$store.dispatch("user/showAuth")},signOut:function(){this.$store.dispatch("user/signout")}}},m=(o("3wNx"),Object(a.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"header"},[n("div",[n("div",{staticClass:"nav"},[n("router-link",{attrs:{to:{name:"home"}}},[t._v("\n        "+t._s(t.title)+"\n      ")])],1),t._v(" "),n("div",{staticClass:"actions"},[t.isCreating?t._e():n("router-link",{attrs:{to:{name:"editor"}}},[t._v("\n        Create\n      ")]),t._v(" "),t.isAuth?n("div",{staticClass:"dropdown"},[n("div",{staticClass:"toggle"},[t._v("\n          "+t._s(t.profile.name)+"\n          "),n("i",[t._v(">")])]),t._v(" "),n("div",{staticClass:"content"},[n("router-link",{attrs:{to:{name:"profile",params:{id:t.profile._id}}}},[t._v("\n            Your profile\n          ")]),t._v(" "),n("a",{on:{click:t.signOut}},[t._v("Sign-Out")])],1)]):n("button",{on:{click:t.signIn}},[t._v("\n        Sign-In\n      ")])],1)])])},[],!1,null,"cf5af17c",null));m.options.__file="header.vue";var p={name:"Layout",components:{Auth:u,Footer:f,Header:m.exports}},d=(o("lMWF"),o("orqt"),Object(a.a)(p,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Header"),t._v(" "),n("div",{staticClass:"route"},[n("router-view")],1),t._v(" "),n("Footer"),t._v(" "),n("Auth")],1)},[],!1,null,"94760a62",null));d.options.__file="layout.vue";var v=d.exports,g=o("jE9Z"),b=o("Womt"),_=o("Vb2j"),y=o.n(_),w=o("1339"),j=o.n(w),E=o("vDqi"),S=o.n(E),x=o("je13"),T=o.n(x),O=S.a.create({baseURL:"https://api.3dpixels.gatunes.com/"}),k="3DPixels::JWT",C={auth:{getStoredToken:function(){return T.a.get(k)},refreshToken:function(){return O.get("user")},setToken:function(t){var e=O.defaults.headers.common;t?(e.Authorization="Bearer ".concat(t),T.a.set(k,t)):(delete e.Authorization,T.a.remove(k))}},meshes:{list:function(t){return O.get("meshes/latest/".concat(t))},meta:function(t){return O.get("meshes/".concat(t))},save:function(t){var e=t._id,n=t.bg,r=t.fps,o=t.texture,i=t.title,a=new FormData;return a.append("bg",n),a.append("fps",r),a.append("texture",new Blob([o],{type:"image/png"})),a.append("title",i),O.put("meshes/".concat(e||""),a)},texture:function(t){return O.get("meshes/".concat(t,"/texture"),{responseType:"arraybuffer"})}},user:{get:function(t){return O.get("user/".concat(t))},meshes:function(t,e){return O.get("user/".concat(t,"/meshes/").concat(e))},signin:function(t,e){return O.post("user",{email:t,password:e})},signup:function(t,e,n){return O.put("user",{name:t,email:e,password:n})}}};function P(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var D=function(){function n(){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.queue=[],this.workers=[],Promise.all([o.e(0),o.e(2)]).then(o.t.bind(null,"lmWw",7)).then(function(t){var e=t.default;r.workers=P(Array(n.numWorkers)).map(function(){var n=new e;return n.onmessage=function(t){var e=t.data;return r.onMessage(n,e)},n});var i=r.queue;r.workers.forEach(function(t){if(i.length){var e=i.shift(),n=e.buffer,r=e.disposable,o=e.resolve;t.isBusy=!0,t.resolve=o,t.postMessage({buffer:n},r?[n]:[])}})})}var t,e,r;return t=n,(e=[{key:"mesh",value:function(t){var i=this.queue,a=this.workers,n=function(r,o){return new Promise(function(t){for(var e,n=0;n<a.length;n+=1)if(!a[n].isBusy){e=a[n];break}e?(e.isBusy=!0,e.resolve=t,e.postMessage({buffer:r},o?[r]:[])):i.push({buffer:r,disposable:o,resolve:t})})};return t instanceof ArrayBuffer?n(t,!1):C.meshes.texture(t).then(function(t){var e=t.data;return n(e,!0)})}},{key:"onMessage",value:function(t,e){t.resolve(e);var n=this.queue;if(n.length){var r=n.shift(),o=r.buffer,i=r.disposable,a=r.resolve;t.resolve=a,t.postMessage({buffer:o},i?[o]:[])}else delete t.resolve,t.isBusy=!1}}])&&A(t.prototype,e),r&&A(t,r),n}();D.numWorkers=navigator.hardwareConcurrency||4;var R=new D;function M(t){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function I(t,e){return!e||"object"!==M(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function $(t){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function z(t,e){return(z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var U=function(t){function i(t){var e,n=t._id,r=t.fps,o=t.texture;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=I(this,$(i).call(this,new b.b,new b.g({vertexColors:b.q})))).fps=r,e.frame=0,e.lastTick=0,e.visible=!1,e.load(o||n),e}var e,n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&z(t,e)}(i,b["f"]),e=i,(n=[{key:"load",value:function(t){var s=this;R.mesh(t).then(function(t){var e=t.position,n=t.color,r=t.index,o=t.frames;s.frames=o,s.frame=Math.min(s.frame,o.length-1);var i=o[s.frame];s.geometry&&s.geometry.dispose();var a=new b.b;a.setDrawRange(i.start,i.count),a.setIndex(new b.a(r,1)),a.addAttribute("position",new b.a(e,3)),a.addAttribute("color",new b.a(n,3)),s.geometry=a,s.visible=!0})}},{key:"onBeforeRender",value:function(t){var e=t.animationTime,n=this.fps,r=this.frames,o=this.lastTick;if(1<r.length&&r&&1/n<=e-o){this.lastTick=e,this.frame=(this.frame+1)%r.length;var i=r[this.frame];this.geometry.setDrawRange(i.start,i.count)}}}])&&F(e.prototype,n),r&&F(e,r),i}();function L(t){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function B(t,e){return!e||"object"!==L(e)&&"function"!=typeof e?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):e}function H(t){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function N(t,e){return(N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var q=function(t){function o(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var e=new b.j(1,1);e.rotateX(-.5*Math.PI),e.translate(0,-.001,0);var n=b.m.basic.vertexShader.replace("#include <clipping_planes_pars_vertex>",["#include <clipping_planes_pars_vertex>","varying vec3 vWorldPosition;"].join("\n")).replace("#include <fog_vertex>",["#include <fog_vertex>","vWorldPosition = (modelMatrix * vec4( transformed, 1.0 )).xyz;"].join("\n")),r=b.m.basic.fragmentShader.replace("#include <clipping_planes_pars_fragment>",["#include <clipping_planes_pars_fragment>","varying vec3 vWorldPosition;"].join("\n")).replace("vec4 diffuseColor = vec4( diffuse, opacity );",["vec2 coord = vWorldPosition.xz * 0.25;","vec2 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);","float line = min(grid.x, grid.y);","vec4 diffuseColor = vec4(mix(diffuse, diffuse * 1.25, 1.0 - min(line, 1.0)), opacity);"].join("\n"));return(t=B(this,H(o).call(this,e,new b.n({name:"ground-material",uniforms:b.o.clone(b.m.basic.uniforms),fragmentShader:r,vertexShader:n,extensions:{derivatives:!0},fog:!0})))).material.color=t.material.uniforms.diffuse.value,t.scale.set(512,1,512),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(o,b["f"]),o}();function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}b.l.fog_pars_vertex=b.l.fog_pars_vertex.replace("varying float fogDepth;","varying vec4 fogDepth;"),b.l.fog_vertex=b.l.fog_vertex.replace("fogDepth = -mvPosition.z;","fogDepth = mvPosition;"),b.l.fog_pars_fragment=b.l.fog_pars_fragment.replace("varying float fogDepth;","varying vec4 fogDepth;"),b.l.fog_fragment=b.l.fog_fragment.replace("float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );",["float fogDist = length(fogDepth);","float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDist * fogDist * LOG2 ) );"].join("\n")).replace("float fogFactor = smoothstep( fogNear, fogFar, fogDepth );","float fogFactor = smoothstep( fogNear, fogFar, length(fogDepth) );");var V={name:"Renderer",props:{mesh:{type:Object,required:!0},pointerAnimation:{type:Boolean,default:function(){return!1}}},watch:{"mesh.bg":function(){var t=this.mesh.bg;this.setClearColor(t)},"mesh.fps":function(){var t=this.mesh.fps;this.state.actor.fps=t},"mesh.texture":function(){var t=this.mesh.texture;this.state.actor.load(t)}},mounted:function(){this.init()},beforeDestroy:function(){this.destroy()},methods:{init:function(){var t=this.mesh,e=this.$refs.mount,n={};(this.state=n).mount=e,n.camera=new b.i(64,1,1,1024),n.clock=new b.c,n.renderer=new b.r({alpha:!1,antialias:!0}),n.renderer.setPixelRatio(window.devicePixelRatio||1),n.scene=new b.k,n.scene.fog=new b.e(0,.007488),n.tilt=new b.h,n.tilt.add(n.camera),n.camera.position.z=64,n.tilt.position.y=32,n.pan=new b.h,n.pan.add(n.tilt),n.scene.add(n.pan),n.actor=new U(t),n.scene.add(n.actor),n.ground=new q,n.scene.add(n.ground),this.setClearColor(t.bg),e.appendChild(n.renderer.domElement),e.addEventListener("contextmenu",function(t){return t.preventDefault()},!1),e.addEventListener("dblclick",this.requestFullscreen,!1),e.addEventListener("mouseenter",this.onPointerEnter,!1),e.addEventListener("mouseleave",this.onPointerLeave,!1),window.addEventListener("blur",this.onPointerUp,!1),window.addEventListener("resize",this.onResize,!1),n.fullscreen=y()(e),this.$parent.$on("fullscreen",this.requestFullscreen),n.renderer.setAnimationLoop(this.onAnimate),this.onResize(),n.pointer={active:!1,animation:this.pointerAnimation,over:!1,current:new b.p(0,0),movement:new b.p(0,0),normalized:new b.p(0,0),last:new b.p(0,0)},n.touches=j()(window,{filtered:!0,target:e}).on("start",this.onPointerDown).on("move",this.onPointerMove).on("end",this.onPointerUp)},destroy:function(){var t=this.state,e=t.actor,n=t.fullscreen,r=t.ground,o=t.mount,i=t.renderer,a=t.touches;r.geometry.dispose(),e.geometry.dispose(),i.setAnimationLoop(null),i.dispose(),i.forceContextLoss(),this.$parent.$off("fullscreen",this.requestFullscreen),n.target()===o&&n.release(),n.dispose(),a.disable(),window.removeEventListener("blur",this.onPointerUp),window.removeEventListener("resize",this.onResize)},onAnimate:function(){var t=this.state,e=t.clock,n=t.camera,r=t.fullscreen,o=t.mount,i=t.pointer,a=t.renderer,s=t.scene,u=t.tilt,c=t.pan;a.animationDelta=e.getDelta(),a.animationTime=e.oldTime/1e3;var l=.3*Math.PI;if(i.active){var f=.2*a.animationDelta;c.rotation.y-=i.movement.x*f,c.rotation.y=Math.min(Math.max(c.rotation.y,-l),l),u.rotation.x-=i.movement.y*f*.5,u.rotation.x=Math.min(Math.max(u.rotation.x,-l),.5*l),i.movement.x=0,i.movement.y=0}else if(i.animation&&r.target()!==o){var h=.5*a.animationDelta,m=function(t){return Math.min(Math.max(t,-h),h)};i.over?(c.rotation.y+=m(i.normalized.x*l-c.rotation.y),u.rotation.x+=m(i.normalized.y*l*.5-u.rotation.x)):(c.rotation.y+=m(-c.rotation.y),u.rotation.x+=m(-u.rotation.x))}a.render(s,n)},onPointerDown:function(t){var e=this.state,n=e.pointer,r=e.mount;t.target!==r&&t.target.parentNode!==r||(n.active=!0)},onPointerMove:function(t,e){var n=W(e,2),r=n[0],o=n[1],i=this.state,a=i.pointer,s=i.renderer.getSize(),u=s.width,c=s.height;a.current.x=r,a.current.y=o,a.normalized.x=Math.min(Math.max(.5-r/u,-.5),.5),a.normalized.y=Math.min(Math.max(.5-o/c,-.5),.5),a.movement.subVectors(a.current,a.last),a.last.copy(a.current)},onPointerUp:function(){this.state.pointer.active=!1},onPointerEnter:function(){this.state.pointer.over=!0},onPointerLeave:function(){this.state.pointer.over=!1},onResize:function(){var t=this.state,e=t.camera,n=t.fullscreen,r=t.mount,o=t.renderer,i=r.getBoundingClientRect(),a=i.width,s=i.height;n.target()===r?(o.setSize(a,s),e.aspect=a/s):(o.setSize(a,a),e.aspect=1),e.updateProjectionMatrix()},requestFullscreen:function(){var t=this.state,e=t.fullscreen,n=t.mount;e.target()===n?e.release():e.request()},setClearColor:function(t){var e=this.state,n=e.ground,r=e.renderer,o=e.scene.fog;o.color.setHex(t),n.material.color.copy(o.color).multiplyScalar(.25),r.setClearColor(o.color)}}},X=Object(a.a)(V,function(){var t=this.$createElement;return(this._self._c||t)("div",{ref:"mount"})},[],!1,null,null,null);X.options.__file="renderer.vue";var Y=X.exports,G=new b.d,K={name:"Home",components:{Renderer:Y},filters:{hexColor:function(t){return G.set(t),"#".concat(G.getHexString())}},props:{meshes:{type:Array,required:!0}}},Q=(o("kbrO"),Object(a.a)(K,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"listing"},e._l(e.meshes,function(t){return n("div",{key:t._id,staticClass:"mesh"},[n("Renderer",{attrs:{mesh:t,"pointer-animation":!0}}),e._v(" "),n("router-link",{staticClass:"meta",style:{backgroundColor:e.$options.filters.hexColor(t.bg)},attrs:{to:{name:"editor",params:{id:t._id}}}},[n("span",{staticClass:"title"},[e._v("\n        "+e._s(t.title)+"\n      ")]),e._v(" "),n("span",{staticClass:"creator"},[e._v("\n        by "+e._s(t.creator.name)+"\n      ")])])],1)}))},[],!1,null,"6c5514f3",null));Q.options.__file="listing.vue";var Z=Q.exports;var J={name:"Pagination",components:{Renderer:Y},props:{page:{type:Number,default:function(){return 0}},pages:{type:Number,required:!0},params:{type:Object,default:function(){return{}}},route:{type:String,required:!0}},methods:{getRoute:function(t){return{name:this.route,params:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},this.params,{page:t})}}}},tt=(o("r26W"),Object(a.a)(J,function(){var t=this,e=t.$createElement,n=t._self._c||e;return 1<t.pages?n("div",{staticClass:"pagination"},[0<t.page?n("router-link",{attrs:{to:t.getRoute(t.page-1)}},[t._v("\n    <\n  ")]):n("a",{staticClass:"disabled"},[t._v("\n    <\n  ")]),t._v(" "),n("span",[t._v("\n    "+t._s(t.page+1)+"/"+t._s(t.pages)+"\n  ")]),t._v(" "),t.page<t.pages-1?n("router-link",{attrs:{to:t.getRoute(t.page+1)}},[t._v("\n    >\n  ")]):n("a",{staticClass:"disabled"},[t._v("\n    >\n  ")])],1):t._e()},[],!1,null,"47c381d4",null));tt.options.__file="pagination.vue";var et=tt.exports;var nt={name:"Home",components:{Listing:Z,Pagination:et},computed:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},Object(r.b)("home",["meshes","pages"]),{page:function(){var t=this.$route.params.page;return parseInt(t||0,10)}}),mounted:function(){this.fetch(this.page)},beforeDestroy:function(){this.reset()},beforeRouteUpdate:function(t,e,n){var r=t.params.page;this.reset(),this.fetch(parseInt(r||0,10)),n()},methods:{fetch:function(t){this.$store.dispatch("home/fetch",t)},reset:function(){this.$store.dispatch("home/reset")}}},rt=(o("lQwf"),Object(a.a)(nt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Listing",{attrs:{meshes:t.meshes}}),t._v(" "),n("Pagination",{attrs:{page:t.page,pages:t.pages,route:"home"}})],1)},[],!1,null,"51c35569",null));rt.options.__file="home.vue";var ot=rt.exports,it=o("wd/R"),at=o.n(it);function st(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var ut=new b.d,ct={name:"Frames",props:{background:{type:Number,required:!0},current:{type:Number,required:!0},texture:{type:ArrayBuffer,required:!0}},data:function(){return{frames:[]}},computed:{backgroundStyle:function(){return ut.set(this.background),ut.offsetHSL(0,0,-.1),{backgroundColor:"#".concat(ut.getHexString())}}},watch:{texture:function(){this.load()}},mounted:function(){this.load()},methods:{load:function(){var t=this,n=new Image,r=document.createElement("canvas"),o=r.getContext("2d");n.onload=function(){t.frames=st(Array(Math.floor(n.width/64))).map(function(t,e){return r.width=64,r.height=64,o.drawImage(n,64*e,0,64,64,0,0,64,64),r.toDataURL("image/png")})};var e=new Blob([this.texture],{type:"image/png"});n.src=URL.createObjectURL(e)},setFrame:function(t){this.$store.dispatch("editor/setFrame",t)}}},lt=(o("XqBz"),Object(a.a)(ct,function(){var n=this,t=n.$createElement,r=n._self._c||t;return r("div",{staticClass:"frames"},n._l(n.frames,function(t,e){return r("img",{key:e+":"+t,class:{active:n.current===e},style:n.backgroundStyle,attrs:{src:t},on:{click:function(t){n.setFrame(e)}}})}))},[],!1,null,"26784efd",null));lt.options.__file="frames.vue";var ft=lt.exports;function ht(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var mt=new b.d,pt={name:"Sprite",props:{background:{type:Number,required:!0},brush:{type:Number,required:!0},color:{type:String,required:!0},frame:{type:Number,required:!0},texture:{type:ArrayBuffer,required:!0},tool:{type:String,required:!0}},computed:{brushGrid:function(){for(var t=this.brush,e=[],n=Math.max(t-1,0),r=-n;r<=n;r+=1)for(var o=-n;o<=n;o+=1)e.push([o,r]);return e}},watch:{background:function(){this.render()},frame:function(){this.render(),delete this.state.lastPixel},tool:function(){delete this.state.lastPixel}},mounted:function(){var t=this.$refs.canvas;t.addEventListener("contextmenu",function(t){return t.preventDefault()}),window.addEventListener("resize",this.onResize,!1),this.onResize(),this.load(),this.touches=j()(window,{filtered:!0,target:t}).on("start",this.onPointerDown).on("move",this.onPointerMove).on("end",this.onPointerUp),this.$parent.$on("addFrame",this.addFrame),this.$parent.$on("removeFrame",this.removeFrame)},beforeDestroy:function(){window.removeEventListener("resize",this.onResize),this.touches.disable(),this.$parent.$off("addFrame",this.addFrame),this.$parent.$off("removeFrame",this.removeFrame)},methods:{addFrame:function(){var t=this,e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],n=this.frame,r=this.state,o=r.width,i=r.height;r.width=o+64,r.ctx.putImageData(r.pixels,0,0,0,0,64*(n+1),i),r.ctx.putImageData(r.pixels,64,0,64*(n+(e?0:1)),0,o-64*(n+(e?0:1)),i),r.pixels=r.ctx.getImageData(0,0,r.width,r.height),this.updateTexture().then(function(){return t.$emit("frames",{current:n+1,total:Math.floor(r.width/64)})})},removeFrame:function(){var t=this,e=this.frame,n=this.state,r=n.width,o=n.height;n.width=r-64,n.ctx.putImageData(n.pixels,0,0,0,0,64*e,o),n.ctx.putImageData(n.pixels,-64,0,64*(e+1),0,r-64*(e+1),o),n.pixels=n.ctx.getImageData(0,0,n.width,n.height),this.updateTexture().then(function(){return t.$emit("frames",{current:Math.max(e-1,0),total:Math.floor(n.width/64)})})},load:function(){var e=this,n=new Image;n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height,t.ctx=t.getContext("2d"),t.ctx.drawImage(n,0,0),t.pixels=t.ctx.getImageData(0,0,t.width,t.height),t.lastUpdate=Date.now(),e.state=t,e.$emit("frames",{current:0,total:Math.floor(t.width/64)}),e.render()};var t=new Blob([this.texture],{type:"image/png"});n.src=URL.createObjectURL(t)},onPointerDown:function(t,e){var n=this.$refs.canvas;t.target!==n&&t.target.parentNode!==n||(this.drawing=!0,this.onPointerMove(t,e))},onPointerMove:function(t,e){var n=ht(e,2),u=n[0],c=n[1],r=this.$refs.canvas,o=this.brushGrid,l=this.color,i=this.frame,a=this.state,f=this.tool;if(!(!this.drawing||u<0||c<0||u>=r.width||c>=r.height)){u=Math.floor(64*u/r.width),c=Math.floor(64*c/r.width);var h=function(t,e){return 4*(e*a.width+64*i+t)},s=h(u,c);if(a.lastPixel!==s){a.lastPixel=s;var m=a.pixels.data;if("pick"!==f){o.forEach(function(t){var e=ht(t,2),n=e[0],r=e[1],o=u+n,i=c+r;if(!(o<0||i<0||64<=o||64<=i)){var a=h(o,i);if("erase"===f)m[a]=0,m[a+1]=0,m[a+2]=0,m[a+3]=0;else{mt.set(l);var s=.05*((mt.r+mt.g+mt.b)/3);mt.r+=(2*Math.random()-1)*s,mt.g+=(2*Math.random()-1)*s,mt.b+=(2*Math.random()-1)*s,m[a]=255*mt.r,m[a+1]=255*mt.g,m[a+2]=255*mt.b,m[a+3]=255}}}),a.ctx.putImageData(a.pixels,0,0),this.render();var p=Date.now()-a.lastUpdate;100<=p?this.updateTexture():(clearTimeout(a.updateTimer),a.updateTimer=setTimeout(this.updateTexture,100-p))}else if(128<=m[s+3]){var d=m[s],v=m[s+1],g=m[s+2];mt.r=d/255,mt.g=v/255,mt.b=g/255,this.$emit("color","#".concat(mt.getHexString()))}}}},onPointerUp:function(){this.drawing=!1},onResize:function(){var t=this.$refs.canvas,e=t.parentNode.getBoundingClientRect().width;t.width=e,t.height=e,this.render()},render:function(){if(this.state){var t=this.background,e=this.$refs.canvas,n=this.frame,r=this.state;e.width=e.width;var o=e.getContext("2d");o.imageSmoothingEnabled=!1,mt.set(t),mt.offsetHSL(0,0,-.1),o.fillStyle="#".concat(mt.getHexString()),o.fillRect(0,0,e.width,e.height);var i=e.width/64;o.scale(i,i),o.drawImage(r,64*n,0,64,64,0,0,64,64),o.beginPath();for(var a=0;a<=64;a+=1)o.moveTo(a,0),o.lineTo(a,64);for(var s=0;s<=64;s+=1)o.moveTo(0,s),o.lineTo(64,s);o.lineWidth=.1,o.strokeStyle="rgba(0, 0, 0, .1)",o.stroke()}},updateTexture:function(){var e=this,t=this.state;return clearTimeout(t.updateTimer),t.lastUpdate=Date.now(),new Promise(function(n){return t.toBlob(function(t){var e=new FileReader;e.addEventListener("loadend",function(){n(e.result)}),e.readAsArrayBuffer(t)},"image/png")}).then(function(t){return e.$emit("texture",t)})}}},dt=Object(a.a)(pt,function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas"})},[],!1,null,null,null);dt.options.__file="sprite.vue";var vt=dt.exports;var gt=new b.d,bt={name:"Editor",components:{Frames:ft,Sprite:vt,Renderer:Y},filters:{fromNow:function(t){return at()(t).fromNow()},hexColor:function(t){return gt.set(t),"#".concat(gt.getHexString())},intColor:function(t){return gt.set(t),gt.getHex()}},computed:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},Object(r.b)("editor",["brush","color","frame","frames","hasChanged","isEditingTitle","mesh","tool"]),Object(r.b)("user",["isAuth","profile"]),{isCreator:function(){return!this.mesh._id||this.isAuth&&this.mesh.creator&&this.mesh.creator._id===this.profile._id}}),watch:{"mesh._id":function(){var t=this.mesh._id;t&&this.$router.replace({name:"editor",params:{id:t}})}},mounted:function(){window.addEventListener("keydown",this.onKeyDown,!1);var t=this.$route.params.id;t?this.fetch(t):this.create()},beforeDestroy:function(){window.removeEventListener("keydown",this.onKeyDown),this.reset()},beforeRouteUpdate:function(t,e,n){var r=t.params.id;this.reset(),r?this.fetch(r):this.create(),n()},methods:{create:function(){this.$store.dispatch("editor/create")},fetch:function(t){this.$store.dispatch("editor/fetch",t)},fullscreen:function(){this.$emit("fullscreen")},editTitle:function(){var e=this;this.isCreator&&(this.$store.dispatch("editor/editTitle"),this.$nextTick(function(){var t=e.$refs.titleInput;t.select(),t.focus()}))},onColor:function(t){this.$store.dispatch("editor/setColor",t),this.setTool("paint")},onFrames:function(t){this.$store.dispatch("editor/setFrames",t)},onKeyDown:function(t){var e=t.keyCode,n=t.repeat,r=t.target;if(!n&&"INPUT"!==r.tagName){var o=this.frame,i=this.frames;switch(e){case 37:case 38:0<o&&this.stepFrame(-1);break;case 39:case 40:o<i-1&&this.stepFrame(1);break;case 49:this.setTool("paint");break;case 50:this.setTool("erase");break;case 51:this.setTool("pick")}}},onTexture:function(t){this.$store.dispatch("editor/setTexture",t)},onTitleInputKeydown:function(t){var e=t.keyCode,n=t.repeat,r=t.target;13!==e||n||this.setTitle({target:r})},reset:function(){this.$store.dispatch("editor/reset")},save:function(){this.$store.dispatch(this.isAuth?"editor/save":"user/showAuth")},addFrame:function(t){this.$emit("addFrame",t)},removeFrame:function(){this.$emit("removeFrame")},stepFrame:function(t){this.$store.dispatch("editor/stepFrame",t)},setBackground:function(t){var e=t.target.value;this.$store.dispatch("editor/setBackground",this.$options.filters.intColor(e))},setBrush:function(t){var e=t.target.value;this.$store.dispatch("editor/setBrush",Math.min(Math.max(parseInt(e,10),1),10))},setColor:function(t){var e=t.target.value;this.onColor(e)},setFps:function(t){var e=t.target.value;this.$store.dispatch("editor/setFPS",Math.max(parseInt(e,10),1))},setTitle:function(t){var e=t.target.value;this.$store.dispatch("editor/setTitle",e)},setTool:function(t){this.$store.dispatch("editor/setTool",t)}}},_t=(o("jZGn"),Object(a.a)(bt,function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.mesh?n("div",{staticClass:"editor"},[n("div",{staticClass:"title"},[e.isEditingTitle?n("input",{ref:"titleInput",attrs:{maxlength:"25",type:"text"},domProps:{value:e.mesh.title},on:{keydown:e.onTitleInputKeydown,blur:e.setTitle}}):n("span",{on:{click:function(t){e.editTitle()}}},[e._v("\n      "+e._s(e.mesh.title)+"\n    ")]),e._v(" "),e.mesh.creator?n("small",[e._v("\n      by\n      "),n("router-link",{attrs:{to:{name:"profile",params:{id:e.mesh.creator._id}}}},[e._v("\n        "+e._s(e.mesh.creator.name)+"\n      ")])],1):e._e()]),e._v(" "),n("div",{staticClass:"meta"},[e._v("\n    created "+e._s(e._f("fromNow")(e.mesh.createdAt))+"\n  ")]),e._v(" "),n("div",{staticClass:"toolbar"},[n("div",[n("button",{class:{active:"paint"===e.tool},on:{click:function(t){e.setTool("paint")}}},[e._v("\n        Paint\n      ")]),e._v(" "),n("button",{class:{active:"erase"===e.tool},on:{click:function(t){e.setTool("erase")}}},[e._v("\n        Erase\n      ")]),e._v(" "),n("button",{class:{active:"pick"===e.tool},on:{click:function(t){e.setTool("pick")}}},[e._v("\n        Pick\n      ")])]),e._v(" "),n("div",[n("label",[e._v("FPS:")]),e._v(" "),n("input",{attrs:{type:"number",min:"1"},domProps:{value:e.mesh.fps},on:{change:e.setFps}})]),e._v(" "),n("div",[n("button",{class:{warning:e.hasChanged},attrs:{disabled:e.mesh._id&&e.isCreator&&!e.hasChanged},on:{click:function(t){e.save()}}},[e.isCreator?n("span",[e._v("\n          Save\n        ")]):n("span",[e._v("\n          Save as copy\n        ")])])])]),e._v(" "),e.mesh.texture?n("div",{staticClass:"wrapper"},[n("div",[n("Sprite",{attrs:{background:e.mesh.bg,brush:e.brush,color:e.color,frame:e.frame,texture:e.mesh.texture,tool:e.tool},on:{color:e.onColor,frames:e.onFrames,texture:e.onTexture}})],1),e._v(" "),n("div",{staticClass:"frames"},[n("Frames",{attrs:{background:e.mesh.bg,current:e.frame,texture:e.mesh.texture}})],1),e._v(" "),n("Renderer",{attrs:{mesh:e.mesh}})],1):e._e(),e._v(" "),n("div",{staticClass:"toolbar"},[n("div",[n("input",{attrs:{type:"color"},domProps:{value:e.color},on:{change:e.setColor}}),e._v(" "),n("input",{attrs:{type:"color"},domProps:{value:e._f("hexColor")(e.mesh.bg)},on:{change:e.setBackground}}),e._v(" "),n("label",[e._v("Brush:")]),e._v(" "),n("input",{attrs:{type:"number",min:"1",max:"10"},domProps:{value:e.brush},on:{change:e.setBrush}})]),e._v(" "),n("div",[n("button",{on:{click:function(t){e.addFrame()}}},[e._v("\n        +\n      ")]),e._v(" "),n("button",{on:{click:function(t){e.addFrame(!0)}}},[e._v("\n        Clone\n      ")]),e._v(" "),n("button",{attrs:{disabled:e.frames<=1},on:{click:function(t){e.removeFrame()}}},[e._v("\n        ×\n      ")])]),e._v(" "),n("div",[n("button",{on:{click:e.fullscreen}},[e._v("\n        Fullscreen\n      ")])])])]):e._e()},[],!1,null,"8ff71218",null));_t.options.__file="editor.vue";var yt=_t.exports,wt={name:"NotFound"},jt=(o("Ky5X"),Object(a.a)(wt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"notfound"},[n("h1",[t._v("404 - Not found")]),t._v(" "),n("router-link",{attrs:{to:{name:"home"}}},[t._v("\n    « Go to home\n  ")])],1)},[],!1,null,"77310550",null));jt.options.__file="notfound.vue";var Et=jt.exports;var St={name:"Home",components:{Listing:Z,Pagination:et},filters:{fromNow:function(t){return at()(t).fromNow()}},computed:function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},Object(r.b)("profile",["meshes","meta","pages"]),{page:function(){var t=this.$route.params.page;return parseInt(t||0,10)}}),mounted:function(){var t=this.$route.params.id;this.fetch(t,this.page)},beforeDestroy:function(){this.reset()},beforeRouteUpdate:function(t,e,n){var r=t.params,o=r.id,i=r.page;this.reset(),this.fetch(o,parseInt(i||0,10)),n()},methods:{fetch:function(t,e){this.$store.dispatch("profile/fetch",{id:t,page:e})},reset:function(){this.$store.dispatch("profile/reset")}}},xt=(o("rRTj"),Object(a.a)(St,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"profile"},[t.meta.name?n("div",{staticClass:"meta"},[n("h1",[t._v(t._s(t.meta.name))]),t._v(" "),n("p",[t._v("joined "+t._s(t._f("fromNow")(t.meta.createdAt)))])]):t._e(),t._v(" "),n("Listing",{attrs:{meshes:t.meshes}}),t._v(" "),n("Pagination",{attrs:{page:t.page,pages:t.pages,params:{id:t.meta._id},route:"profile"}})],1)},[],!1,null,"2d14956b",null));xt.options.__file="profile.vue";var Tt=xt.exports;n.a.use(g.a);var Ot=new g.a({base:"/",routes:[{path:"/",redirect:{name:"home"}},{component:ot,name:"home",path:"/latest/:page?"},{component:yt,name:"editor",path:"/editor/:id?"},{component:Tt,name:"profile",path:"/user/:id/:page?"},{component:Et,name:"404",path:"*"}]});var kt={namespaced:!0,state:{brush:1,color:"#aaaaaa",frame:0,frames:0,hasChanged:!1,isEditingTitle:!1,mesh:!1,tool:"paint"},mutations:{EDIT_TITLE:function(t){t.isEditingTitle=!0},RESET:function(t){t.frame=0,t.frames=0,t.mesh=!1,t.hasChanged=!1,t.isEditingTitle=!1},SAVED:function(t){t.hasChanged=!1},SET_BACKGROUND:function(t,e){t.mesh.bg=e,t.hasChanged=!0},SET_BRUSH:function(t,e){t.brush=e},SET_COLOR:function(t,e){t.color=e},SET_FPS:function(t,e){t.mesh.fps=e,t.hasChanged=!0},SET_FRAME:function(t,e){t.frame=Math.min(Math.max(e,0),t.frames-1)},STEP_FRAME:function(t,e){t.frame=Math.min(Math.max(t.frame+e,0),t.frames-1)},SET_FRAMES:function(t,e){var n=e.current,r=e.total;t.frame=n,t.frames=r},SET_ID:function(t,e){var n=e.id,r=e.creator;t.mesh._id=n,t.mesh.creator=r},SET_MESH:function(t,e){t.mesh=e||!1},SET_TEXTURE:function(t,e){t.mesh.texture=e,t.hasChanged=!0},SET_TITLE:function(t,e){e&&t.mesh.title!==e&&(t.mesh.title=e,t.hasChanged=!0),t.isEditingTitle=!1},SET_TOOL:function(t,e){t.tool=e}},actions:{create:function(t){var n=t.commit,r=t.rootState,e=document.createElement("canvas");e.width=64,e.height=64,e.toBlob(function(t){var e=new FileReader;e.addEventListener("loadend",function(){n("RESET"),n("SET_MESH",{_id:!1,creator:!!r.user.isAuth&&r.user.profile,bg:5592405,fps:2,texture:e.result,title:"Untitled"})}),e.readAsArrayBuffer(t)},"image/png")},editTitle:function(t){(0,t.commit)("EDIT_TITLE")},fetch:function(t,e){var n=t.commit;Promise.all([C.meshes.meta(e),C.meshes.texture(e)]).then(function(t){return n("SET_MESH",function(o){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},e=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),e.forEach(function(t){var e,n,r;e=o,r=i[n=t],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return o}({},t[0].data,{texture:t[1].data}))}).catch(function(){return n("SET_MESH",!1)})},reset:function(t){(0,t.commit)("RESET")},save:function(t){var n=t.commit,r=t.rootState,e=t.state;C.meshes.save(e.mesh).then(function(t){var e=t.data;n("SAVED"),e&&n("SET_ID",{id:e,creator:r.user.profile})}).catch(console.error)},setBackground:function(t,e){(0,t.commit)("SET_BACKGROUND",e)},setBrush:function(t,e){(0,t.commit)("SET_BRUSH",e)},setColor:function(t,e){(0,t.commit)("SET_COLOR",e)},setFPS:function(t,e){(0,t.commit)("SET_FPS",e)},setFrame:function(t,e){(0,t.commit)("SET_FRAME",e)},stepFrame:function(t,e){(0,t.commit)("STEP_FRAME",e)},setFrames:function(t,e){(0,t.commit)("SET_FRAMES",e)},setTexture:function(t,e){(0,t.commit)("SET_TEXTURE",e)},setTitle:function(t,e){(0,t.commit)("SET_TITLE",e)},setTool:function(t,e){(0,t.commit)("SET_TOOL",e)}}},Ct={namespaced:!0,state:{meshes:[],pages:0},mutations:{SET_MESHES:function(t,e){var n=e.meshes,r=e.pages;t.meshes=n||[],t.pages=r||0}},actions:{fetch:function(t,e){var n=t.commit;C.meshes.list(e).then(function(t){var e=t.data;return n("SET_MESHES",e)}).catch(function(){return n("SET_MESHES",{})})},reset:function(t){(0,t.commit)("SET_MESHES",{})}}},Pt={namespaced:!0,state:{meshes:[],meta:{},pages:0},mutations:{SET_MESHES:function(t,e){var n=e.meshes,r=e.pages;t.meshes=n||[],t.pages=r||0},SET_META:function(t,e){t.meta=e||{}}},actions:{fetch:function(t,e){var n=t.commit,r=e.id,o=e.page;C.user.meshes(r,o).then(function(t){var e=t.data;return n("SET_MESHES",e)}).catch(function(){return n("SET_MESHES",{})}),C.user.get(r).then(function(t){var e=t.data;return n("SET_META",e)}).catch(function(){return n("SET_META",!1)})},reset:function(t){var e=t.commit;e("SET_MESHES",{}),e("SET_META",!1)}}},At=o("BOF4"),Dt=o.n(At),Rt={namespaced:!0,state:{hasAuthError:!1,isAuth:!1,isShowingAuth:!1,profile:{}},mutations:{SHOW_AUTH:function(t){t.isShowingAuth=!0},HIDE_AUTH:function(t){t.isShowingAuth=!1,t.hasAuthError=!1},SET_AUTH_ERROR:function(t,e){t.hasAuthError=e||!1},SIGN_IN:function(t,e){t.isAuth=!0,t.isShowingAuth=!1,t.profile=Dt()(e),C.auth.setToken(e)},SIGN_OUT:function(t){t.isAuth=!1,t.profile={},C.auth.setToken()}},actions:{initAuth:function(t){var e=t.commit,n=C.auth.getStoredToken();n&&(e("SIGN_IN",n),C.auth.refreshToken().then(function(t){var e=t.data;return C.auth.setToken(e)}).catch(function(){return e("SIGN_OUT")}))},showAuth:function(t){(0,t.commit)("SHOW_AUTH")},hideAuth:function(t){(0,t.commit)("HIDE_AUTH")},signin:function(t,e){var n=t.commit,r=e.email,o=e.password;n("SET_AUTH_ERROR"),C.user.signin(r,o).then(function(t){var e=t.data;return n("SIGN_IN",e)}).catch(function(){return n("SET_AUTH_ERROR","signin")})},signout:function(t){(0,t.commit)("SIGN_OUT")},signup:function(t,e){var n=t.commit,r=e.name,o=e.email,i=e.password;n("SET_AUTH_ERROR"),C.user.signup(r,o,i).then(function(t){var e=t.data;return n("SIGN_IN",e)}).catch(function(){return n("SET_AUTH_ERROR","signup")})}}};n.a.use(r.a);var Mt=new r.a.Store({modules:{editor:kt,home:Ct,profile:Pt,user:Rt},strict:!1});Mt.dispatch("user/initAuth");var Ft=Mt;n.a.config.performance=!1,n.a.config.productionTip=!1;new n.a({el:"#mount",components:{Layout:v},render:function(t){return t("Layout")},router:Ot,store:Ft})},Ky5X:function(t,e,n){"use strict";var r=n("6WBF");n.n(r).a},RMY0:function(t,e,n){},RnhZ:function(t,e,n){var r={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function o(t){var e=i(t);return n(e)}function i(t){var e=r[t];if(e+1)return e;var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}o.keys=function(){return Object.keys(r)},o.resolve=i,(t.exports=o).id="RnhZ"},X4m3:function(t,e,n){},XqBz:function(t,e,n){"use strict";var r=n("1YDw");n.n(r).a},eZ3X:function(t,e,n){},g3qL:function(t,e,n){},gf4m:function(t,e,n){},jZGn:function(t,e,n){"use strict";var r=n("CFU4");n.n(r).a},kbrO:function(t,e,n){"use strict";var r=n("gf4m");n.n(r).a},lMWF:function(t,e,n){"use strict";var r=n("0kCN");n.n(r).a},lQwf:function(t,e,n){"use strict";var r=n("eZ3X");n.n(r).a},loVV:function(t,e,n){},orqt:function(t,e,n){"use strict";var r=n("X4m3");n.n(r).a},r26W:function(t,e,n){"use strict";var r=n("g3qL");n.n(r).a},rRTj:function(t,e,n){"use strict";var r=n("loVV");n.n(r).a},sjho:function(t,e,n){"use strict";var r=n("C417");n.n(r).a},zid9:function(t,e,n){"use strict";var r=n("FXAq");n.n(r).a}},[["GUI7",3,0]]]);
//# sourceMappingURL=main.ec086fd93651d782f1a97ea77ccfe1ce.js.map